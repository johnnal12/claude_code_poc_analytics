<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Claude Code Usage Report — Feb 17–23, 2026</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-deep: #0a0c10;
    --bg-surface: #12151c;
    --bg-card: #181c26;
    --bg-elevated: #1e2330;
    --border: #262c3a;
    --border-subtle: #1c2130;
    --text-primary: #e8ecf4;
    --text-secondary: #8892a6;
    --text-muted: #5a6478;
    --accent-cyan: #22d3ee;
    --accent-cyan-dim: rgba(34, 211, 238, 0.12);
    --accent-green: #34d399;
    --accent-green-dim: rgba(52, 211, 153, 0.12);
    --accent-amber: #fbbf24;
    --accent-amber-dim: rgba(251, 191, 36, 0.12);
    --accent-red: #f87171;
    --accent-red-dim: rgba(248, 113, 113, 0.12);
    --accent-purple: #a78bfa;
    --accent-blue: #60a5fa;
    --gradient-cyan: linear-gradient(135deg, #22d3ee, #06b6d4);
    --gradient-green: linear-gradient(135deg, #34d399, #10b981);
    --gradient-amber: linear-gradient(135deg, #fbbf24, #f59e0b);
    --gradient-red: linear-gradient(135deg, #f87171, #ef4444);
    --noise: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg-deep);
    color: var(--text-primary);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: var(--noise);
    pointer-events: none;
    z-index: 0;
  }

  .container {
    max-width: 1440px;
    margin: 0 auto;
    padding: 0 32px 80px;
    position: relative;
    z-index: 1;
  }

  header {
    padding: 48px 0 40px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 40px;
    position: relative;
  }

  header::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 200px;
    height: 1px;
    background: var(--gradient-cyan);
  }

  .header-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 24px;
    flex-wrap: wrap;
  }

  .header-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--accent-cyan);
    background: var(--accent-cyan-dim);
    padding: 5px 12px;
    border-radius: 4px;
    border: 1px solid rgba(34, 211, 238, 0.2);
    margin-bottom: 16px;
  }

  .header-badge::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent-cyan);
    animation: pulse-dot 2s ease infinite;
  }

  @keyframes pulse-dot {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  h1 {
    font-family: 'DM Sans', sans-serif;
    font-size: 32px;
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.2;
    color: var(--text-primary);
  }

  h1 span {
    color: var(--text-muted);
    font-weight: 400;
  }

  .header-meta {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 8px;
  }

  .header-right { text-align: right; flex-shrink: 0; }

  .date-range {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    color: var(--text-secondary);
    background: var(--bg-card);
    padding: 8px 14px;
    border-radius: 6px;
    border: 1px solid var(--border);
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 40px;
  }

  .stat-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    position: relative;
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .stat-card:hover { filter: brightness(1.05); }

  .stat-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
  }

  .stat-card:nth-child(1)::before { background: var(--gradient-cyan); }
  .stat-card:nth-child(2)::before { background: var(--gradient-green); }
  .stat-card:nth-child(3)::before { background: var(--gradient-amber); }
  .stat-card:nth-child(4)::before { background: var(--gradient-red); }

  .stat-label {
    font-size: 12px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    margin-bottom: 10px;
  }

  .stat-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 32px;
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1;
  }

  .stat-card:nth-child(1) .stat-value { color: var(--accent-cyan); }
  .stat-card:nth-child(2) .stat-value { color: var(--accent-green); }
  .stat-card:nth-child(3) .stat-value { color: var(--accent-amber); }
  .stat-card:nth-child(4) .stat-value { color: var(--accent-red); }

  .stat-sub {
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 8px;
    font-family: 'JetBrains Mono', monospace;
  }

  .section { margin-bottom: 40px; }

  .section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border-subtle);
  }

  .section-icon {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
  }

  h2 {
    font-size: 16px;
    font-weight: 600;
    letter-spacing: -0.01em;
  }

  h2 .count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 400;
    color: var(--text-muted);
    margin-left: 8px;
  }

  .alerts-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .alert-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 20px;
    position: relative;
    overflow: hidden;
  }

  .alert-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; bottom: 0;
    width: 3px;
  }

  .alert-critical::before { background: var(--accent-red); }
  .alert-warning::before { background: var(--accent-amber); }

  .alert-title {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .alert-critical .alert-title { color: var(--accent-red); }
  .alert-warning .alert-title { color: var(--accent-amber); }

  .alert-users { list-style: none; }

  .alert-users li {
    font-size: 13px;
    padding: 6px 0;
    border-bottom: 1px solid var(--border-subtle);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .alert-users li:last-child { border-bottom: none; }
  .alert-users .user-name { color: var(--text-primary); font-weight: 500; }
  .alert-users .user-detail {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
  }

  .table-wrapper {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
  }

  table { width: 100%; border-collapse: collapse; font-size: 13px; }
  thead { background: var(--bg-elevated); }

  th {
    text-align: left;
    padding: 12px 16px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted);
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    user-select: none;
    white-space: nowrap;
  }

  th:hover { color: var(--text-secondary); }
  th.sorted-asc::after { content: ' \u25B2'; font-size: 9px; }
  th.sorted-desc::after { content: ' \u25BC'; font-size: 9px; }
  th.num, td.num { text-align: right; }

  td {
    padding: 10px 16px;
    border-bottom: 1px solid var(--border-subtle);
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
  }

  td.user-cell {
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    font-weight: 500;
  }

  tr:last-child td { border-bottom: none; }
  tr:hover td { background: rgba(255,255,255,0.02); }
  .row-inactive td { opacity: 0.5; }
  .row-inactive td.user-cell { color: var(--accent-red); opacity: 1; }
  .row-low td.user-cell { color: var(--accent-amber); }
  .row-active td.user-cell { color: var(--text-primary); }

  .status-dot {
    display: inline-block;
    width: 7px; height: 7px;
    border-radius: 50%;
    margin-right: 8px;
    flex-shrink: 0;
  }

  .status-dot.s-active { background: var(--accent-green); box-shadow: 0 0 6px rgba(52,211,153,0.4); }
  .status-dot.s-low { background: var(--accent-amber); box-shadow: 0 0 6px rgba(251,191,36,0.3); }
  .status-dot.s-inactive { background: var(--accent-red); box-shadow: 0 0 6px rgba(248,113,113,0.3); }

  .bar-chart {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
  }

  .bar-row {
    display: grid;
    grid-template-columns: 180px 1fr 60px;
    align-items: center;
    gap: 12px;
    padding: 4px 0;
  }

  .bar-name {
    font-size: 12px;
    font-weight: 500;
    text-align: right;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--text-secondary);
  }

  .bar-track {
    height: 20px;
    background: var(--bg-elevated);
    border-radius: 3px;
    overflow: hidden;
  }

  .bar-fill {
    height: 100%;
    border-radius: 3px;
    background: var(--gradient-cyan);
    transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .bar-fill.low { background: var(--gradient-amber); }
  .bar-fill.inactive { background: var(--gradient-red); }

  .bar-val {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
    text-align: right;
  }

  .schedule-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 16px;
  }

  .schedule-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 20px;
  }

  .schedule-card h3 {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 14px;
    color: var(--text-muted);
  }

  .schedule-card h3 .pill {
    display: inline-block;
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 10px;
    margin-left: 6px;
    font-weight: 700;
    font-family: 'JetBrains Mono', monospace;
  }

  .schedule-card:nth-child(1) h3 .pill { background: var(--accent-green-dim); color: var(--accent-green); }
  .schedule-card:nth-child(2) h3 .pill { background: var(--accent-amber-dim); color: var(--accent-amber); }
  .schedule-card:nth-child(3) h3 .pill { background: rgba(167,139,250,0.15); color: var(--accent-purple); }

  .schedule-list { list-style: none; }

  .schedule-list li {
    font-size: 13px;
    padding: 5px 0;
    color: var(--text-secondary);
    display: flex;
    justify-content: space-between;
  }

  .schedule-list .sess {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
  }

  .heatmap-wrapper {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    overflow-x: auto;
  }

  .heatmap {
    display: grid;
    grid-template-columns: 200px repeat(7, 1fr);
    gap: 3px;
    min-width: 700px;
  }

  .hm-header {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-muted);
    text-align: center;
    padding: 8px 4px;
  }

  .hm-header.day-label { text-align: right; padding-right: 12px; }

  .hm-header.weekend { color: var(--accent-purple); opacity: 0.7; }

  .hm-name {
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    padding-right: 12px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .hm-cell {
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 500;
    min-height: 28px;
    transition: transform 0.15s;
    cursor: default;
    position: relative;
  }

  .hm-cell:hover { transform: scale(1.15); z-index: 2; }

  .hm-cell.intensity-0 { background: var(--bg-elevated); color: var(--text-muted); }
  .hm-cell.intensity-1 { background: rgba(34, 211, 238, 0.1); color: rgba(34,211,238,0.6); }
  .hm-cell.intensity-2 { background: rgba(34, 211, 238, 0.2); color: rgba(34,211,238,0.8); }
  .hm-cell.intensity-3 { background: rgba(34, 211, 238, 0.35); color: #22d3ee; }
  .hm-cell.intensity-4 { background: rgba(34, 211, 238, 0.5); color: #fff; }
  .hm-cell.intensity-5 { background: rgba(34, 211, 238, 0.7); color: #fff; font-weight: 700; }

  .hm-cell.weekend-col { border-left: 2px solid rgba(167,139,250,0.15); }

  .heatmap-legend {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 16px;
    justify-content: flex-end;
  }

  .heatmap-legend span {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
  }

  .legend-cell { width: 16px; height: 16px; border-radius: 3px; }

  @keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .animate-in { animation: fadeSlideUp 0.5s ease both; }
  .delay-1 { animation-delay: 0.05s; }
  .delay-2 { animation-delay: 0.1s; }
  .delay-3 { animation-delay: 0.15s; }
  .delay-4 { animation-delay: 0.2s; }
  .delay-5 { animation-delay: 0.25s; }
  .delay-6 { animation-delay: 0.3s; }

  @media (max-width: 900px) {
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .alerts-grid { grid-template-columns: 1fr; }
    .schedule-grid { grid-template-columns: 1fr; }
    .bar-row { grid-template-columns: 120px 1fr 50px; }
  }

  @media (max-width: 600px) {
    .container { padding: 0 16px 60px; }
    .stats-grid { grid-template-columns: 1fr; }
    h1 { font-size: 24px; }
    .stat-value { font-size: 28px; }
  }

  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg-deep); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
</style>
</head>
<body>

<div class="container">
  <header class="animate-in">
    <div class="header-top">
      <div>
        <div class="header-badge">Weekly Report</div>
        <h1>Claude Code Usage <span>/ 7-Day Review</span></h1>
        <div class="header-meta">Fannie Mae Engineering &mdash; 29 team members tracked</div>
      </div>
      <div class="header-right">
        <div class="date-range">Feb 17 &ndash; 23, 2026</div>
      </div>
    </div>
  </header>

  <div class="stats-grid" id="statsGrid"></div>

  <div class="section animate-in delay-2">
    <div class="section-header">
      <div class="section-icon" style="background:var(--accent-red-dim);color:var(--accent-red);">&#9888;</div>
      <h2>Usage Alerts <span class="count">8 flagged</span></h2>
    </div>
    <div class="alerts-grid" id="alertsGrid"></div>
  </div>

  <div class="section animate-in delay-3">
    <div class="section-header">
      <div class="section-icon" style="background:var(--accent-cyan-dim);color:var(--accent-cyan);">&#9632;</div>
      <h2>Sessions by User</h2>
    </div>
    <div class="bar-chart" id="barChart"></div>
  </div>

  <div class="section animate-in delay-4">
    <div class="section-header">
      <div class="section-icon" style="background:var(--accent-green-dim);color:var(--accent-green);">&#9638;</div>
      <h2>Daily Activity Heatmap</h2>
    </div>
    <div class="heatmap-wrapper">
      <div class="heatmap" id="heatmap"></div>
      <div class="heatmap-legend">
        <span>Less</span>
        <div class="legend-cell" style="background:var(--bg-elevated);"></div>
        <div class="legend-cell" style="background:rgba(34,211,238,0.1);"></div>
        <div class="legend-cell" style="background:rgba(34,211,238,0.2);"></div>
        <div class="legend-cell" style="background:rgba(34,211,238,0.35);"></div>
        <div class="legend-cell" style="background:rgba(34,211,238,0.5);"></div>
        <div class="legend-cell" style="background:rgba(34,211,238,0.7);"></div>
        <span>More</span>
      </div>
    </div>
  </div>

  <div class="section animate-in delay-5">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(167,139,250,0.12);color:var(--accent-purple);">&#9684;</div>
      <h2>Work Schedule Patterns</h2>
    </div>
    <div class="schedule-grid" id="scheduleGrid"></div>
  </div>

  <div class="section animate-in delay-6">
    <div class="section-header">
      <div class="section-icon" style="background:var(--accent-cyan-dim);color:var(--accent-cyan);">&#9776;</div>
      <h2>Full Roster <span class="count">29 users</span></h2>
    </div>
    <div class="table-wrapper">
      <table id="userTable">
        <thead>
          <tr>
            <th data-key="name">User</th>
            <th data-key="days" class="num">Days /7</th>
            <th data-key="sessions" class="num">Sessions</th>
            <th data-key="added" class="num">Lines +</th>
            <th data-key="removed" class="num">Lines &minus;</th>
            <th data-key="commits" class="num">Commits</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
// All data is hardcoded — no user input flows into DOM rendering.
const USERS = [
  { name:"John Albesa", days:7, sessions:304, added:49821, removed:8908, commits:19, dates:[17,18,19,20,21,22,23] },
  { name:"Eve Freeman", days:6, sessions:176, added:96979, removed:14426, commits:190, dates:[17,18,20,21,22,23] },
  { name:"Duc X Nguyen", days:5, sessions:123, added:205492, removed:4368, commits:0, dates:[17,18,19,20,22] },
  { name:"Dinesh Kumar Vivekanandhan", days:5, sessions:109, added:65569, removed:1509, commits:0, dates:[19,20,21,22,23] },
  { name:"Vivek Ojha", days:6, sessions:106, added:33902, removed:4907, commits:0, dates:[17,18,19,20,22,23] },
  { name:"Bojan Mihovilovic", days:7, sessions:101, added:49137, removed:9910, commits:86, dates:[17,18,19,20,21,22,23] },
  { name:"Charles A Smith", days:7, sessions:97, added:75621, removed:4264, commits:4, dates:[17,18,19,20,21,22,23] },
  { name:"Feng X Hou", days:5, sessions:85, added:10779, removed:2493, commits:32, dates:[17,18,19,20,21] },
  { name:"Seyedmeysam Abolghasemi", days:6, sessions:73, added:35220, removed:4339, commits:6, dates:[17,18,19,20,21,22] },
  { name:"Stephen C Schwartz", days:6, sessions:63, added:30721, removed:3401, commits:0, dates:[18,19,20,21,22,23] },
  { name:"Jacob Meador", days:7, sessions:59, added:38024, removed:8404, commits:12, dates:[17,18,19,20,21,22,23] },
  { name:"Moeen Rana", days:7, sessions:59, added:27210, removed:2239, commits:0, dates:[17,18,19,20,21,22,23] },
  { name:"Emmett X York", days:6, sessions:48, added:38937, removed:1504, commits:0, dates:[18,19,20,21,22,23] },
  { name:"Tushar X Gupta", days:5, sessions:43, added:9307, removed:1039, commits:29, dates:[17,18,19,20,23] },
  { name:"Guopeng Yin", days:7, sessions:37, added:7624, removed:1280, commits:0, dates:[17,18,19,20,21,22,23] },
  { name:"Manideep Reddy Chinthareddy", days:5, sessions:37, added:4933, removed:622, commits:0, dates:[17,18,19,21,22] },
  { name:"Bennett Miller", days:2, sessions:32, added:12951, removed:2762, commits:0, dates:[19,20] },
  { name:"Vikas W Jaiswal", days:6, sessions:28, added:1674, removed:343, commits:0, dates:[18,19,20,21,22,23] },
  { name:"Roman Podshivalov", days:3, sessions:27, added:6877, removed:1520, commits:13, dates:[19,20,23] },
  { name:"Sunil J Punnoose", days:4, sessions:23, added:10155, removed:1799, commits:15, dates:[20,21,22,23] },
  { name:"John Wang", days:2, sessions:10, added:3854, removed:60, commits:0, dates:[17,22] },
  { name:"Kalyana C Bedhu", days:2, sessions:9, added:9177, removed:2215, commits:0, dates:[22,23] },
  { name:"Christopher X Walker", days:1, sessions:4, added:141, removed:12, commits:0, dates:[19] },
  { name:"Mingxin Chuai", days:1, sessions:2, added:0, removed:0, commits:0, dates:[17] },
  { name:"Kunal T Vakil", days:1, sessions:0, added:0, removed:0, commits:0, dates:[18] },
  { name:"Qiuhua Zheng", days:0, sessions:0, added:0, removed:0, commits:0, dates:[] },
  { name:"Sivashankar Gnanasegaran", days:0, sessions:0, added:0, removed:0, commits:0, dates:[] },
  { name:"Sujit Das", days:0, sessions:0, added:0, removed:0, commits:0, dates:[] },
  { name:"Vinay K Vangala", days:0, sessions:0, added:0, removed:0, commits:0, dates:[] },
];

const DAILY = {
  "John Albesa":       {17:20,18:73,19:105,20:38,21:15,22:29,23:24},
  "Eve Freeman":       {17:44,18:15,20:8,21:36,22:34,23:39},
  "Duc X Nguyen":      {17:37,18:36,19:37,20:8,22:5},
  "Dinesh Kumar Vivekanandhan": {19:27,20:52,21:9,22:17,23:4},
  "Vivek Ojha":        {17:34,18:21,19:10,20:4,22:13,23:24},
  "Bojan Mihovilovic": {17:4,18:21,19:19,20:14,21:24,22:12,23:7},
  "Charles A Smith":   {17:3,18:17,19:8,20:25,21:8,22:14,23:22},
  "Feng X Hou":        {17:4,18:15,19:27,20:7,21:32},
  "Seyedmeysam Abolghasemi": {17:5,18:9,19:4,20:11,21:16,22:28},
  "Stephen C Schwartz":{18:24,19:8,20:4,21:11,22:13,23:3},
  "Jacob Meador":      {17:8,18:7,19:8,20:15,21:5,22:5,23:11},
  "Moeen Rana":        {17:3,18:12,19:7,20:10,21:14,22:11,23:2},
  "Emmett X York":     {18:14,19:9,20:3,21:7,22:10,23:5},
  "Tushar X Gupta":    {17:4,18:16,19:5,20:3,23:15},
  "Guopeng Yin":       {17:6,18:7,19:10,20:4,21:5,22:3,23:2},
  "Manideep Reddy Chinthareddy": {17:4,18:11,19:11,21:8,22:3},
  "Bennett Miller":    {19:28,20:4},
  "Vikas W Jaiswal":   {18:7,19:4,20:5,21:2,22:8,23:2},
  "Roman Podshivalov": {19:9,20:7,23:11},
  "Sunil J Punnoose":  {20:3,21:7,22:10,23:3},
  "John Wang":         {17:3,22:7},
  "Kalyana C Bedhu":   {22:5,23:4},
  "Christopher X Walker":{19:4},
  "Mingxin Chuai":     {17:2},
  "Kunal T Vakil":     {18:0},
};

const WEEKDAYS = [17,18,19,20,21];
const WEEKENDS = [22,23];

function fmt(n) { return n.toLocaleString(); }

// Safe DOM helper: creates an element from a tag, sets attributes/text, appends children
function el(tag, attrs, ...children) {
  const e = document.createElement(tag);
  if (attrs) {
    for (const [k, v] of Object.entries(attrs)) {
      if (k === 'cls') e.className = v;
      else if (k === 'text') e.textContent = v;
      else if (k === 'style') e.style.cssText = v;
      else if (k.startsWith('data-')) e.setAttribute(k, v);
      else e.setAttribute(k, v);
    }
  }
  for (const c of children) {
    if (typeof c === 'string') e.appendChild(document.createTextNode(c));
    else if (c) e.appendChild(c);
  }
  return e;
}

function clearAppend(parent, ...children) {
  parent.textContent = '';
  for (const c of children) parent.appendChild(c);
}

// ─── STAT CARDS ───
function renderStats() {
  const totalSessions = USERS.reduce((s,u) => s + u.sessions, 0);
  const totalAdded = USERS.reduce((s,u) => s + u.added, 0);
  const activeUsers = USERS.filter(u => u.sessions > 0).length;
  const avgSessions = activeUsers > 0 ? Math.round(totalSessions / activeUsers) : 0;

  const cards = [
    { label: "Total Sessions", value: fmt(totalSessions), sub: "across 7 days" },
    { label: "Lines Added", value: fmt(totalAdded), sub: "net code growth" },
    { label: "Active Users", value: activeUsers + " / 29", sub: Math.round(activeUsers/29*100) + "% engagement" },
    { label: "Avg Sessions / User", value: fmt(avgSessions), sub: "active users only" },
  ];

  const grid = document.getElementById('statsGrid');
  clearAppend(grid, ...cards.map((c, i) => {
    const card = el('div', { cls: `stat-card animate-in delay-${i+1}` },
      el('div', { cls: 'stat-label', text: c.label }),
      el('div', { cls: 'stat-value', text: c.value }),
      el('div', { cls: 'stat-sub', text: c.sub })
    );
    return card;
  }));
}

// ─── ALERTS ───
function makeAlertCard(type, title, users) {
  const ul = el('ul', { cls: 'alert-users' });
  for (const u of users) {
    const li = el('li', null,
      el('span', { cls: 'user-name', text: u.name }),
      el('span', { cls: 'user-detail', text: u.detail })
    );
    ul.appendChild(li);
  }
  const card = el('div', { cls: `alert-card ${type}` },
    el('div', { cls: 'alert-title', text: title }),
    ul
  );
  return card;
}

function renderAlerts() {
  const grid = document.getElementById('alertsGrid');

  const zero = USERS.filter(u => u.days === 0).map(u => ({ name: u.name, detail: "0 sessions, 0 days" }));
  const veryLow = USERS.filter(u => u.days > 0 && u.sessions < 5).map(u => ({
    name: u.name, detail: u.sessions + " sess / " + u.days + " day" + (u.days > 1 ? "s" : "")
  }));

  const weekendOnly = USERS.filter(u => u.days > 0 && u.dates.every(d => WEEKENDS.includes(d))).map(u => ({
    name: u.name, detail: u.sessions + " sess on weekends"
  }));

  const lowWeekday = USERS.filter(u => {
    if (u.days === 0) return false;
    const wdSessions = DAILY[u.name] || {};
    const wdTotal = WEEKDAYS.reduce((s, d) => s + (wdSessions[d] || 0), 0);
    return wdTotal === 0 && u.sessions > 0;
  }).map(u => ({ name: u.name, detail: u.sessions + " sess (weekends only)" }));

  const cards = [
    makeAlertCard('alert-critical', '\u26D4 Zero Activity', zero),
    makeAlertCard('alert-warning', '\u26A0 Very Low Usage (< 5 sessions)', veryLow),
  ];
  if (weekendOnly.length > 0) {
    cards.push(makeAlertCard('alert-warning', '\uD83D\uDCC5 Weekend Only (no weekday activity)', weekendOnly));
  }
  if (lowWeekday.length > 0) {
    cards.push(makeAlertCard('alert-warning', '\uD83D\uDCC9 Zero Weekday Sessions', lowWeekday));
  }

  clearAppend(grid, ...cards);
}

// ─── BAR CHART ───
function renderBarChart() {
  const sorted = [...USERS].sort((a,b) => b.sessions - a.sessions);
  const max = sorted[0].sessions;
  const container = document.getElementById('barChart');

  clearAppend(container, ...sorted.map(u => {
    const pct = max > 0 ? (u.sessions / max * 100) : 0;
    const cls = u.sessions === 0 ? 'inactive' : u.sessions < 10 ? 'low' : '';
    const fill = el('div', { cls: 'bar-fill ' + cls, style: 'width:' + pct + '%' });
    return el('div', { cls: 'bar-row' },
      el('div', { cls: 'bar-name', text: u.name }),
      el('div', { cls: 'bar-track' }, fill),
      el('div', { cls: 'bar-val', text: fmt(u.sessions) })
    );
  }));
}

// ─── HEATMAP ───
function renderHeatmap() {
  const days = [
    { d: 17, label: "Mon 17", weekend: false },
    { d: 18, label: "Tue 18", weekend: false },
    { d: 19, label: "Wed 19", weekend: false },
    { d: 20, label: "Thu 20", weekend: false },
    { d: 21, label: "Fri 21", weekend: false },
    { d: 22, label: "Sat 22", weekend: true },
    { d: 23, label: "Sun 23", weekend: true },
  ];

  let maxSess = 0;
  for (const vals of Object.values(DAILY)) {
    for (const v of Object.values(vals)) {
      if (v > maxSess) maxSess = v;
    }
  }

  function intensity(val) {
    if (!val) return 0;
    const ratio = val / maxSess;
    if (ratio < 0.08) return 1;
    if (ratio < 0.2) return 2;
    if (ratio < 0.4) return 3;
    if (ratio < 0.7) return 4;
    return 5;
  }

  const sorted = [...USERS].sort((a,b) => b.sessions - a.sessions);
  const grid = document.getElementById('heatmap');
  grid.textContent = '';

  // Header row
  grid.appendChild(el('div', { cls: 'hm-header day-label' }));
  for (const day of days) {
    grid.appendChild(el('div', { cls: 'hm-header' + (day.weekend ? ' weekend' : ''), text: day.label }));
  }

  // Data rows
  for (const u of sorted) {
    const daily = DAILY[u.name] || {};
    grid.appendChild(el('div', { cls: 'hm-name', text: u.name }));
    for (const day of days) {
      const val = daily[day.d] || 0;
      const inten = u.days === 0 ? 0 : intensity(val);
      const display = val > 0 ? String(val) : (u.dates.includes(day.d) ? '0' : '\u2013');
      grid.appendChild(el('div', {
        cls: 'hm-cell intensity-' + inten + (day.weekend ? ' weekend-col' : ''),
        text: display
      }));
    }
  }
}

// ─── SCHEDULE PATTERNS ───
function renderSchedule() {
  const both = [], weekdayOnly = [], weekendOnly = [];

  for (const u of USERS) {
    if (u.days === 0) continue;
    const hasWeekday = u.dates.some(d => WEEKDAYS.includes(d));
    const hasWeekend = u.dates.some(d => WEEKENDS.includes(d));
    if (hasWeekday && hasWeekend) both.push(u);
    else if (hasWeekday) weekdayOnly.push(u);
    else weekendOnly.push(u);
  }

  both.sort((a,b) => b.sessions - a.sessions);
  weekdayOnly.sort((a,b) => b.sessions - a.sessions);
  weekendOnly.sort((a,b) => b.sessions - a.sessions);

  function makeList(arr) {
    const ul = el('ul', { cls: 'schedule-list' });
    for (const u of arr) {
      ul.appendChild(el('li', null,
        el('span', { text: u.name }),
        el('span', { cls: 'sess', text: u.sessions + ' sess' })
      ));
    }
    return ul;
  }

  function makeCard(title, count, arr) {
    const h3 = el('h3', null,
      document.createTextNode(title + ' '),
      el('span', { cls: 'pill', text: String(count) })
    );
    return el('div', { cls: 'schedule-card' }, h3, makeList(arr));
  }

  clearAppend(document.getElementById('scheduleGrid'),
    makeCard('Weekday + Weekend', both.length, both),
    makeCard('Weekday Only', weekdayOnly.length, weekdayOnly),
    makeCard('Weekend Only', weekendOnly.length, weekendOnly)
  );
}

// ─── TABLE ───
let sortKey = 'sessions';
let sortDir = -1;

function getStatus(u) {
  if (u.days === 0) return 'inactive';
  if (u.sessions < 10) return 'low';
  return 'active';
}

function renderTable() {
  const sorted = [...USERS].sort((a,b) => {
    const va = a[sortKey], vb = b[sortKey];
    if (typeof va === 'string') return sortDir * va.localeCompare(vb);
    return sortDir * (va - vb);
  });

  const tbody = document.getElementById('tableBody');
  tbody.textContent = '';

  for (const u of sorted) {
    const status = getStatus(u);
    const dotClass = status === 'inactive' ? 's-inactive' : status === 'low' ? 's-low' : 's-active';
    const rowClass = status === 'inactive' ? 'row-inactive' : status === 'low' ? 'row-low' : 'row-active';

    const tr = el('tr', { cls: rowClass });
    const tdName = el('td', { cls: 'user-cell' },
      el('span', { cls: 'status-dot ' + dotClass }),
      document.createTextNode(u.name)
    );
    tr.appendChild(tdName);
    tr.appendChild(el('td', { cls: 'num', text: String(u.days) }));
    tr.appendChild(el('td', { cls: 'num', text: fmt(u.sessions) }));
    tr.appendChild(el('td', { cls: 'num', text: fmt(u.added) }));
    tr.appendChild(el('td', { cls: 'num', text: fmt(u.removed) }));
    tr.appendChild(el('td', { cls: 'num', text: String(u.commits) }));
    tbody.appendChild(tr);
  }

  document.querySelectorAll('#userTable th').forEach(th => {
    th.classList.remove('sorted-asc', 'sorted-desc');
    if (th.dataset.key === sortKey) {
      th.classList.add(sortDir === 1 ? 'sorted-asc' : 'sorted-desc');
    }
  });
}

document.querySelectorAll('#userTable th').forEach(th => {
  th.addEventListener('click', () => {
    const key = th.dataset.key;
    if (sortKey === key) sortDir *= -1;
    else { sortKey = key; sortDir = key === 'name' ? 1 : -1; }
    renderTable();
  });
});

// ─── INIT ───
renderStats();
renderAlerts();
renderBarChart();
renderHeatmap();
renderSchedule();
renderTable();
</script>

</body>
</html>
